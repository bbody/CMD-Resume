/* v4.0.19 of CMD Resume by Brendon Body */
!function(c){"use strict";var d={standard:{color:"white",bold:!1,italic:!1,backgroundColor:"#000"},title:{color:"red",bold:!0},command:{color:"white",bold:!1,italic:!0},pgp:{color:"white",bold:!1,italic:!0},name:{color:"green",bold:!0}},m="\n",u=";",l="",p="\t",i=", ",h=" - ",f={STANDARD:0,TITLE:1,COMMAND:2,NAME:3,PGP:4,toString:function(t){switch(t){case f.TITLE:return"title";case f.COMMAND:return"command";case f.NAME:return"name";case f.PGP:return"pgp";case f.STANDARD:return"standard";default:return!1}}},g=function(t){return null==t},b=function(t){return!!t&&c.terminal.valid_color(t)};String.prototype.setFormat=function(t){var a=l;if(0===this.length)return a;var e,n,o,r,i=f.toString(t),s=c.extend({},d.standard);return i&&t!==f.STANDARD&&(e=s,(n=d[i]).color&&b(n.color)&&(e.color=n.color),n.bold&&(e.bold=n.bold),n.italic&&(e.italic=n.italic),n.backgroundColor&&b(n.backgroundColor)&&(e.backgroundColor=n.backgroundColor),s=e),s.bold&&(a+="b"),s.italic&&(a+="i"),a+=u,a+=s.color,a+=u,a+=s.backgroundColor,o=a,(r=this)?"[["+(o=o||l)+"]"+r+"]":l},String.prototype.setTitle=function(){return this.setFormat(f.TITLE)},String.prototype.setCommand=function(){return this.setFormat(f.COMMAND)},String.prototype.setName=function(){return this.setFormat(f.NAME)},String.prototype.setPGP=function(){return this.setFormat(f.PGP)};var y=function(t){var a=m;return a+=t&&t.data?t.data:l},w=function(t){return t?t.handler?t.handler(t.data):t.data?t.data:l:l},k=function(t){return m+w(t)},C=function(r,i){var s=l;return r.handlers&&r.data.some(function(t){var a=[];if(r.handlers.organisation){var e=r.handlers.organisation(t);e&&a.push(e)}if(r.handlers.title){var n=r.handlers.title(t);n&&a.push(n)}if(r.handlers.date){var o=r.handlers.date(t);o&&a.push(o)}return!i&&a.length&&(s+=m),s+=a.join(p),i}),s},P=function(t,a){return a&&t?t+h+a:a||t?a?"Until "+a:t+" - Present":l};c.fn.CMDResume=function(t,a){var e,n,o,r=this;e=d,n=a=a||{},o=c.extend(!0,{},e),c.each(n,function(t,a){e[t]&&(a.color&&(o[t].color=a.color),g(a.bold)||(o[t].bold=a.bold),g(a.italic)||(o[t].italic=a.italic),a.backgroundColor&&(o[t].backgroundColor=a.backgroundColor))}),d=o;var s={commands:{}};return s.commandProcessor={basic:y,array:C,calculated:k,system:w},s.initTerminal=function(){s.term=r.terminal(function(t,a){var e=c.terminal.split_command(t);a.echo(s.commandLineParse(e.name,e.args)+m)},s.settings)},s.initGithubForks=function(t){s.showForks=t.showForks||"true"===t.showForks},s.init=function(t){s.initGithubForks(t),s.initVariables(),s.initCommands(),s.initSettings(),s.initHTMLTitle(),s.initTerminal()},s.commandLineParse=function(t,a){var e=!g(a[0])&&0<a[0].length&&a[0],n=s.commands[t];if("man"===t)return s.commands.man.handler(e);if(n){var o="-top"===e;return s.processCommand(n,o)}return 0<t.length?t.setCommand()+" is an unknown command.":"No command entered."},s.processCommand=function(t,a){var e=l;return a||t.type===s.commandProcessor.system||(e+=t.title.setTitle()),e+=t.type(t,a)},s.getCommandList=function(){var e=[];return c.map(s.commands,function(t,a){e.push(a)}),e},s.hasCommand=function(t){return 0<=s.commandList.indexOf(t)},s.initCommands=function(){s.commands.man={title:"man".setCommand(),description:"describes what each command does",type:s.commandProcessor.system,handler:function(t){return t?s.hasCommand(t)?t.setCommand()+h+s.commands[t].description:"man".setCommand()+": "+t.setCommand()+" is an unknown command.":"man:".setCommand()+" No command entered."}},s.commands.help={title:"Help",description:"lists help for all the commands",type:s.commandProcessor.system,handler:function(){var e="Available Commands:".setTitle();return c.map(s.commands,function(t,a){e+=m,e+=a.setCommand(),e+=h,e+=t.description}),e}},s.commands.clear={description:"clear command history from screen"},s.data.basics.name&&(s.commands.name={title:"Name",description:"owner of the résumé",data:s.data.basics.name,type:s.commandProcessor.basic}),s.data.basics.summary&&(s.commands.about={title:"About",description:"about me",data:s.data.basics.summary,type:s.commandProcessor.basic}),s.data.basics.pdfLink&&(s.commands.pdf={title:"Résumé PDF",description:"pdf version of the résumé",data:s.data.basics.pdfLink,type:s.commandProcessor.calculated,handler:function(t){return window.open(t),decodeURIComponent(escape(t))+m+"Hint: May need to allow pop-ups."}}),s.data.basics.location&&(s.commands.location={title:"Location",description:"current location",data:s.data.basics.location,type:s.commandProcessor.calculated,handler:function(t){var a=[];return t.city&&a.push(t.city),t.region&&a.push(t.region),t.countryCode&&a.push(t.countryCode),a.join(i)}}),s.data.basics.label&&(s.commands.lookingfor={title:"Looking For",description:"looking for what kind of position",data:s.data.basics.label,type:s.commandProcessor.calculated,handler:function(t){return t}}),s.data.basics.profiles&&(s.commands.socialmedia={title:"Social Media",description:"social media profiles",data:s.data.basics.profiles,type:s.commandProcessor.calculated,handler:function(t){var n=[];return t.forEach(function(t){if(t.network)if("email"===t.network.toLowerCase()){var a="";if(t.url&&0<=t.url.indexOf("mailto:"))a=t.url.replace("mailto:","");else if(t.url)a=t.url;else{if(!t.username)return!0;a=t.username}n.push("Email"+h+a)}else if(t.url)n.push(t.network+h+t.url);else if(t.username){var e;(e=function(t,a){if(!t||!a)return l;switch(t.toLowerCase()){case"twitter":return"https://www.twitter.com/"+a;case"github":return"https://www.github.com/"+a;case"linkedin":return"https://www.linkedin.com/in/"+a;case"facebook":return"https://www.facebook.com/"+a;case"reddit":return"https://www.reddit.com/user/"+a;case"hackernews":return"https://news.ycombinator.com/user?id="+a;default:return l}}(t.network,t.username))&&n.push(t.network+h+e)}else n.push(t.network);else t.url&&n.push(t.url)}),n.join(m)}}),s.data.skills&&(s.commands.skills={title:"Skills",description:"skills obtained",type:s.commandProcessor.calculated,data:s.data.skills,handler:function(e){var n=l;return e.forEach(function(t,a){t.level&&(n+=t.level,t.name&&(n+=" in ")),t.name&&(n+=t.name),a!==e.length-1&&(n+=m)}),n}}),s.commands.splash={title:"Splash Screen",description:"print the welcome screen",type:s.commandProcessor.system,handler:function(){var t=l;return s.data.customSplash?t+=s.data.customSplash:s.data.basics.name?t+="Welcome to "+s.data.basics.name.setName()+"'s résumé.":t+="Welcome to my résumé.",t+=m,t+=m,t+="Type ",t+="help".setCommand(),t+=" for commands"}},s.data.education&&(s.commands.education={title:"Education",description:"education history",data:s.data.education,type:s.commandProcessor.array,handlers:{organisation:function(t){return t.institution},title:function(t){return a=t.studyType,e=t.area,a||e?a?e?a+" of "+e:a:e:l;var a,e},date:function(t){return P(t.startDate,t.endDate)}}}),s.data.work&&s.data.work.length&&(s.commands.employment={title:"Employment",description:"employment history",data:s.data.work,type:s.commandProcessor.array,handlers:{organisation:function(t){return t.company},title:function(t){return t.position},date:function(t){return P(t.startDate,t.endDate)}}}),s.data.volunteer&&(s.commands.volunteering={title:"Volunteering",description:"volunteering history",type:s.commandProcessor.array,data:s.data.volunteer,handlers:{organisation:function(t){return t.organization},title:function(t){return t.position},date:function(t){return P(t.startDate,t.endDate)}}}),s.data.awards&&(s.commands.awards={title:"Awards",description:"awards obtained",type:s.commandProcessor.array,data:s.data.awards,handlers:{organisation:function(t){return t.awarder},title:function(t){return t.title},date:function(t){return t.date}}}),s.data.publications&&(s.commands.publications={title:"Publications",description:"publications produced",type:s.commandProcessor.array,data:s.data.publications,handlers:{organisation:function(t){return t.publisher},title:function(t){return t.name},date:function(t){return t.releaseDate}}}),s.data.languages&&(s.commands.languages={title:"Languages",description:"languages",type:s.commandProcessor.array,data:s.data.languages,handlers:{organisation:function(t){return t.language},title:function(t){return t.fluency}}}),s.data.interests&&(s.commands.interests={title:"Interests",description:"interests",type:s.commandProcessor.array,data:s.data.interests,handlers:{organisation:function(t){return t.name?t.name.setName():""},title:function(t){return t.keywords?t.keywords.join(i):""}}}),s.data.references&&(s.commands.references={title:"References",description:"references",type:s.commandProcessor.array,data:s.data.references,handlers:{organisation:function(t){return t.name?t.name.setName():""},title:function(t){return t.reference}}})},s.initVariables=function(){var t,a,o,r,i,e;s.data.commands={},s.data.basics.profiles&&s.data.basics.profiles.forEach(function(t){t.network&&(s.data.basics.githubUsername||"github"!==t.network.toLowerCase()?"resume"===t.network.toLowerCase()&&(s.data.basics.pdfLink=t.url):t.username&&(s.data.basics.githubUsername=t.username))}),s.data.basics.githubUsername&&(e=s.data.basics.githubUsername,t=e?"https://api.github.com/users/"+e+"/repos":l,a=s.data.basics.githubUsername,o=s.showForks,r=function(t){var r=l;t.forEach(function(t,a){var e,n,o;r+=(n=0===a,o=l,(e=t)&&e.name&&(n||(o+=m),o+=e.name.setName(),e.description&&(o+=h+e.description)),o)}),s.commands.github={title:"Github Repositories",description:"list Github repositories",type:s.commandProcessor.basic,data:r},s.commandList.push("github")},i=a.toLowerCase()+".github.com",c.getJSON(t,function(t){var a,e,n;t&&0<t.length&&r((a=i,e=o,n=[],t.forEach(function(t){!t||t.name===a||e!==t.fork&&t.fork||n.push(t)}),n))}))},s.initSettings=function(){s.commandList=s.getCommandList(),s.settings={greetings:s.commands.splash.handler(),onBlur:function(){return!1},completion:s.commandList}},s.initHTMLTitle=function(){var t;t=s.data.basics.name,document.title=t?t+"'s Résumé":"Command Line Résumé"},c.getJSON(t,function(t){s.data=t,s.data.basics||(s.data.basics={}),a.extraDetails?c.getJSON(a.extraDetails,function(t){s.data.pgpkey=t.pgpkey,s.data.pgpkey&&(s.commands.pgpkey={title:"PGP Key",description:"public PGP key",type:s.commandProcessor.calculated,handler:function(){for(var t=l,a=0;a<s.data.pgpkey.length;a++)t+=s.data.pgpkey[a],a!==s.data.pgpkey.length-1&&(t+=m);return t.setPGP()}}),t.github&&(s.data.basics.githubUsername=t.github,s.data.githubCache=l),t.splash&&("string"==typeof t.splash?s.data.customSplash=t.splash+m:s.data.customSplash=t.splash.join(m)),s.init(a)}):s.init(a)}),this.CMDResume=s,this}}(jQuery);