/* v5.4.1 of CMD Resume by Brendon Body(https://github.com/bbody/CMD-Resume.git) */
!function(c){"use strict";var d={standard:{color:"white",bold:!1,italic:!1,backgroundColor:"#000"},title:{color:"red",bold:!0},command:{color:"white",bold:!1,italic:!0},pgp:{color:"white",bold:!1,italic:!0},name:{color:"green",bold:!0}},u="\n",m=";",l="",p="    ",i=", ",h=" - ",f={STANDARD:0,TITLE:1,COMMAND:2,NAME:3,PGP:4,toString:function(t){switch(t){case f.TITLE:return"title";case f.COMMAND:return"command";case f.NAME:return"name";case f.PGP:return"pgp";case f.STANDARD:return"standard";default:return!1}}},g=function(t){return null==t},b=function(t){return!!t&&c.terminal.valid_color(t)},y=function(t){return Array.isArray(t)?t:[t]},C=function(t,n){n=y(n);for(var e=0;e<n.length;e++){var a=n[e];if(void 0===t[a])return!1;t=t[a]}return t},w=function(t){if(!t||0===t.length)return!1;var n=t.match(/((http|https):\/\/)registry.jsonresume\.org\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi);return!!n&&0<n.length};String.prototype.setFormat=function(t){var n=l;if(0===this.length)return n;var e,a,r,o,i=f.toString(t),s=c.extend({},d.standard);return i&&t!==f.STANDARD&&(e=s,(a=d[i]).color&&b(a.color)&&(e.color=a.color),a.bold&&(e.bold=a.bold),a.italic&&(e.italic=a.italic),a.backgroundColor&&b(a.backgroundColor)&&(e.backgroundColor=a.backgroundColor),s=e),s.bold&&(n+="b"),s.italic&&(n+="i"),n+=m,n+=s.color,n+=m,n+=s.backgroundColor,r=n,(o=this)?"[["+(r=r||l)+"]"+o+"]":l},String.prototype.setTitle=function(){return this.setFormat(f.TITLE)},String.prototype.setCommand=function(){return this.setFormat(f.COMMAND)},String.prototype.setName=function(){return this.setFormat(f.NAME)},String.prototype.setPGP=function(){return this.setFormat(f.PGP)};var n=function(t){if(t){if(t.handler)return t.handler(t.data);if(t.data)return t.data}return l},e={basic:function(t){var n=u;return n+=t&&t.data?t.data:l},array:function(o,i){var s=l;return o.handlers&&o.data.some(function(t){var n=[];if(o.handlers.organisation){var e=o.handlers.organisation(t);e&&n.push(e)}if(o.handlers.title){var a=o.handlers.title(t);a&&n.push(a)}if(o.handlers.date){var r=o.handlers.date(t);r&&n.push(r)}return!i&&n.length&&(s+=u),s+=n.join(p),i}),s},calculated:function(t){return u+n(t)},system:n},v="basic",k="array",L="calculated",S="system",T=function(t){return e[t]},A=function(t,n){return n||t?n?t?t+h+n:"Until "+n:t+" - Present":l},s=function(t){return t.replace("mailto:","")},D=function(t,n,e){return"email"===t.toLowerCase()?(r=e,o="",(a=n)?o=s(a):r&&(o=s(r)),o||!1):n||!(!e||!(n=function(t,n){if(!t||!n)return l;switch(t.toLowerCase()){case"twitter":return"https://www.twitter.com/"+n;case"github":return"https://www.github.com/"+n;case"linkedin":return"https://www.linkedin.com/in/"+n;case"facebook":return"https://www.facebook.com/"+n;case"reddit":return"https://www.reddit.com/user/"+n;case"hackernews":return"https://news.ycombinator.com/user?id="+n;default:return l}}(t,e)))&&n;var a,r,o};String.prototype.upperCaseFirstLetter=function(){return this&&this.length?this.charAt(0).toUpperCase()+this.slice(1):""};var a={basic:function(t){return!!t.data||(console.error("'basic' command type requires 'data'"),!1)},system:function(t){return!!t.handler||(console.error("'system' command type requires 'handler'"),!1)},calculated:function(t){return t.data?!!t.handler||(console.error("'calculated' command type requires 'handler'"),!1):(console.error("'calculated' command type requires 'data'"),!1)},array:function(t){return t.data?!!t.handlers||(console.error("'array' command type requires 'handlers'"),!1):(console.error("'array' command type requires 'data'"),!1)}},N=function(t){return t.name?(t.name=t.name.toLowerCase(),t.description?(n=t.type)&&e.hasOwnProperty(n)?a[t.type](t):(console.error("'"+t.name+"' does not have a valid type [basic, system, array, calculated]"),!1):(console.error("'"+t.name+"' does not have a 'description'"),!1)):(console.error("Command must have a name"),!1);var n};c.fn.CMDResume=function(t,n){var e,a,r,o=this;e=d,a=n=n||{},r=c.extend(!0,{},e),c.each(a,function(t,n){e[t]&&(n.color&&(r[t].color=n.color),g(n.bold)||(r[t].bold=n.bold),g(n.italic)||(r[t].italic=n.italic),n.backgroundColor&&(r[t].backgroundColor=n.backgroundColor))}),d=r;var s={commands:{}};return c(o).css("background-color","black"),w(t)&&!function(t){if(!t||0===t.length)return!1;var n=t.match(/.json$/);return!!n&&0<n.length}(t)&&(t+=".json"),s.allCommands=[{name:"man",title:"man".setCommand(),description:"describes what each command does",type:S,handler:function(t){return t?s.hasCommand(t)?t.setCommand()+h+s.commands[t].description:"man".setCommand()+": "+t.setCommand()+" is an unknown command.":"man:".setCommand()+" No command entered."}},{name:"Help",description:"lists help for all the commands",type:S,handler:function(){var e="Available Commands:".setTitle();return c.map(s.commands,function(t,n){e+=u,e+=n.setCommand(),e+=h,e+=t.description}),e}},{name:"Name",description:"owner of the résumé",data:["basics","name"],type:v},{name:"About",description:"about me",data:["basics","summary"],type:v},{name:"pdf",title:"Résumé PDF",description:"pdf version of the résumé",data:["basics","pdfLink"],type:L,handler:function(t){return decodeURIComponent(escape(t))}},{name:"Location",description:"current location",data:["basics","location"],dataIsObject:!0,type:L,handler:function(t){var n=[];return t.city&&n.push(t.city),t.region&&n.push(t.region),t.countryCode&&n.push(t.countryCode),n.join(i)}},{name:"Label",description:"title",data:["basics","label"],type:v},{name:"Education",description:"education history",type:k,handlers:{organisation:function(t){return t.institution},title:function(t){return n=t.studyType,e=t.area,n||e?n?e?n+" of "+e:n:e:l;var n,e},date:function(t){return A(t.startDate,t.endDate)}}},{name:"Employment",description:"employment history",data:"work",type:k,handlers:{organisation:function(t){return t.company},title:function(t){return t.position},date:function(t){return A(t.startDate,t.endDate)}}},{name:"Volunteering",description:"volunteering history",data:"volunteer",type:k,handlers:{organisation:function(t){return t.organization},title:function(t){return t.position},date:function(t){return A(t.startDate,t.endDate)}}},{name:"socialmedia",title:"Social Media",description:"social media profiles",data:["basics","profiles"],dataIsObject:!0,type:L,handler:function(t){var e=[];return t.forEach(function(t){var n=function(t){if(t.network){var n=D(t.network,t.url,t.username);return!!n&&t.network.upperCaseFirstLetter()+h+n}return!!t.url&&t.url}(t);if(!n)return!0;e.push(n)}),e.join(u)}},{name:"Skills",description:"skills obtained",type:L,handler:function(e){var a=l;return e.forEach(function(t,n){t.level&&(a+=t.level,t.name&&(a+=" in ")),t.name&&(a+=t.name),n!==e.length-1&&(a+=u)}),a}},{name:"Awards",description:"awards obtained",type:k,handlers:{organisation:function(t){return t.awarder},title:function(t){return t.title},date:function(t){return t.date}}},{name:"Publications",description:"publications produced",type:k,handlers:{organisation:function(t){return t.publisher},title:function(t){return t.name},date:function(t){return t.releaseDate}}},{name:"Languages",description:"languages",type:k,handlers:{organisation:function(t){return t.language},title:function(t){return t.fluency}}},{name:"Interests",description:"interests",type:k,handlers:{organisation:function(t){return t.name?t.name.setName():""},title:function(t){return t.keywords?t.keywords.join(i):""}}},{name:"References",description:"references",type:k,handlers:{organisation:function(t){return t.name?t.name.setName():""},title:function(t){return t.reference}}},{name:"splash",title:"Splash Screen",description:"print the welcome screen",type:S,handler:function(){var t=l;return s.data.customSplash?t+=s.data.customSplash:s.data.basics.name?t+="Welcome to "+s.data.basics.name.setName()+"'s résumé.":t+="Welcome to my résumé.",t+=u,t+=u,t+="Type ",t+="help".setCommand(),t+=" for commands"}},{name:"pgpkey",title:"PGP Key",description:"public PGP key",type:L,handler:function(){for(var t=l,n=0;n<s.data.pgpkey.length;n++)t+=s.data.pgpkey[n],n!==s.data.pgpkey.length-1&&(t+=u);return t.setPGP()}}],s.initTerminal=function(){s.term=o.terminal(function(t,n){var e=c.terminal.split_command(t);n.echo(s.commandLineParse(e.name,e.args)+u)},s.settings)},s.initGithubForks=function(t){s.showForks=t.showForks||"true"===t.showForks},s.init=function(t){s.initGithubForks(t),s.initVariables(),s.initCommands(),s.initSettings(),s.initHTMLTitle(),s.initTerminal()},s.commandLineParse=function(t,n){var e=!g(n[0])&&0<n[0].length&&n[0],a=s.commands[t];if("man"===t)return s.commands.man.handler(e);if(a){var r="-top"===e;return s.processCommand(a,r)}return 0<t.length?t.setCommand()+" is an unknown command.":"No command entered."},s.showTitle=function(t,n){return t!==S&&(!n||t!==k)},s.processCommand=function(t,n){var e=l;return s.showTitle(t.type,n)&&(e+=t.title.setTitle()),e+=T(t.type)(t,n)},s.getCommandList=function(){var e=[];return c.map(s.commands,function(t,n){e.push(n)}),e},s.hasCommand=function(t){return 0<=s.commandList.indexOf(t)},s.initClear=function(){s.commands.clear={description:"clear command history from screen"}},s.addUserCommands=function(t){t.forEach(function(t){N(t)&&s.addCommand(t)})},s.addCommand=function(t){if(t.type===S||function(t,n,e){if(!n||!t)return!1;var a=C(t,y(n));return a&&(!!e||a.length)}(s.data,t.data?t.data:t.name.toLowerCase(),!!t.dataIsObject)){var n={title:t.title?t.title:t.name,description:t.description,type:t.type};t.type!==S&&(n.data=C(s.data,t.data?t.data:t.name.toLowerCase())),t.handlers&&(n.handlers=t.handlers),t.handler&&(n.handler=t.handler),s.commands[t.name.toLowerCase()]=n}},s.addCommands=function(){s.allCommands.forEach(function(t){s.addCommand(t)})},s.initCommands=function(){s.initClear(),s.addCommands(),n.customCommands&&Array.isArray(n.customCommands)&&n.customCommands.length&&s.addUserCommands(n.customCommands)},s.initSocialMedia=function(){s.data.basics.profiles.forEach(function(t){t.network&&(s.data.basics.githubUsername||"github"!==t.network.toLowerCase()?"resume"===t.network.toLowerCase()&&(s.data.basics.pdfLink=t.url):t.username&&(s.data.basics.githubUsername=t.username))}),!s.data.basics.pdfLink&&w(t)&&(s.data.basics.pdfLink=t.replace(/.json$/,".html"))},s.initGithub=function(){var t,n,r,o,i,e;e=s.data.basics.githubUsername,t=e?"https://api.github.com/users/"+e+"/repos":l,n=s.data.basics.githubUsername,r=s.showForks,o=function(t){var o=l;t.forEach(function(t,n){var e,a,r;o+=(a=0===n,r=l,(e=t)&&e.name&&(a||(r+=u),r+=e.name.setName(),e.description&&(r+=h+e.description)),r)}),s.data.githubCache=o,s.addCommand({name:"Github",title:"Github Repositories",description:"list Github repositories",type:v,data:"githubCache"})},i=n.toLowerCase()+".github.com",c.getJSON(t,function(t){var n,e,a;t&&0<t.length&&o((n=i,e=r,a=[],t.forEach(function(t){!t||t.name===n||e!==t.fork&&t.fork||a.push(t)}),a))})},s.initVariables=function(){s.data.commands={},s.data.basics.profiles&&s.initSocialMedia(),s.data.basics.githubUsername&&s.initGithub()},s.initSettings=function(){s.commandList=s.getCommandList(),s.settings={greetings:s.commands.splash.handler(),completion:s.commandList}},s.initHTMLTitle=function(){var t;t=s.data.basics.name,document.title=t?t+"'s Résumé":"Command Line Résumé"},c.getJSON(t,function(t){s.data=t,s.data.basics||(s.data.basics={}),n.extraDetails?c.getJSON(n.extraDetails,function(t){s.data.pgpkey=t.pgpkey,t.github&&(s.data.basics.githubUsername=t.github,s.data.githubCache=l),t.splash&&("string"==typeof t.splash?s.data.customSplash=t.splash+u:s.data.customSplash=t.splash.join(u)),s.data.extra=t,s.init(n)}):s.init(n)}),this.CMDResume=s,this}}(jQuery);