/* v5.0.0 of CMD Resume by Brendon Body(https://github.com/bbody/CMD-Resume.git) */
!function(c){"use strict";var u={standard:{color:"white",bold:!1,italic:!1,backgroundColor:"#000"},title:{color:"red",bold:!0},command:{color:"white",bold:!1,italic:!0},pgp:{color:"white",bold:!1,italic:!0},name:{color:"green",bold:!0}},d="\n",m=";",l="",p="    ",o=", ",h=" - ",f={STANDARD:0,TITLE:1,COMMAND:2,NAME:3,PGP:4,toString:function(t){switch(t){case f.TITLE:return"title";case f.COMMAND:return"command";case f.NAME:return"name";case f.PGP:return"pgp";case f.STANDARD:return"standard";default:return!1}}},C=function(t){return null==t},g=function(t){return!!t&&c.terminal.valid_color(t)},b=function(t,n){n=y(n);for(var e=0;e<n.length;e++){var a=n[e];if(void 0===t[a])return!1;t=t[a]}return t},y=function(t){return Array.isArray(t)?t:[t]};String.prototype.setFormat=function(t){var n=l;if(0===this.length)return n;var e,a,r,i,o=f.toString(t),s=c.extend({},u.standard);return o&&t!==f.STANDARD&&(e=s,(a=u[o]).color&&g(a.color)&&(e.color=a.color),a.bold&&(e.bold=a.bold),a.italic&&(e.italic=a.italic),a.backgroundColor&&g(a.backgroundColor)&&(e.backgroundColor=a.backgroundColor),s=e),s.bold&&(n+="b"),s.italic&&(n+="i"),n+=m,n+=s.color,n+=m,n+=s.backgroundColor,r=n,(i=this)?"[["+(r=r||l)+"]"+i+"]":l},String.prototype.setTitle=function(){return this.setFormat(f.TITLE)},String.prototype.setCommand=function(){return this.setFormat(f.COMMAND)},String.prototype.setName=function(){return this.setFormat(f.NAME)},String.prototype.setPGP=function(){return this.setFormat(f.PGP)};var w=function(t){var n=d;return n+=t&&t.data?t.data:l},A=function(t){if(t){if(t.handler)return t.handler(t.data);if(t.data)return t.data}return l},D=function(t){return d+A(t)},M=function(i,o){var s=l;return i.handlers&&i.data.some(function(t){var n=[];if(i.handlers.organisation){var e=i.handlers.organisation(t);e&&n.push(e)}if(i.handlers.title){var a=i.handlers.title(t);a&&n.push(a)}if(i.handlers.date){var r=i.handlers.date(t);r&&n.push(r)}return!o&&n.length&&(s+=d),s+=n.join(p),o}),s},S=function(t,n){return n||t?n?t?t+h+n:"Until "+n:t+" - Present":l},s=function(t){return t.replace("mailto:","")},k=function(t,n,e){return"email"===t.toLowerCase()?(r=e,i="",(a=n)?i=s(a):r&&(i=s(r)),i||!1):n||!(!e||!(n=function(t,n){if(!t||!n)return l;switch(t.toLowerCase()){case"twitter":return"https://www.twitter.com/"+n;case"github":return"https://www.github.com/"+n;case"linkedin":return"https://www.linkedin.com/in/"+n;case"facebook":return"https://www.facebook.com/"+n;case"reddit":return"https://www.reddit.com/user/"+n;case"hackernews":return"https://news.ycombinator.com/user?id="+n;default:return l}}(t,e)))&&n;var a,r,i};String.prototype.upperCaseFirstLetter=function(){return this&&this.length?this.charAt(0).toUpperCase()+this.slice(1):""};c.fn.CMDResume=function(t,n){var e,a,r,i=this;e=u,a=n=n||{},r=c.extend(!0,{},e),c.each(a,function(t,n){e[t]&&(n.color&&(r[t].color=n.color),C(n.bold)||(r[t].bold=n.bold),C(n.italic)||(r[t].italic=n.italic),n.backgroundColor&&(r[t].backgroundColor=n.backgroundColor))}),u=r;var s={commands:{}};return s.commandProcessor={basic:w,array:M,calculated:D,system:A},s.CMD={BASIC:"basic",ARRAY:"array",CALCULATED:"calculated",SYSTEM:"system",getCommand:function(t){return s.commandProcessor[t]}},s.allCommands=[{name:"man",title:"man".setCommand(),description:"describes what each command does",type:s.CMD.SYSTEM,handler:function(t){return t?s.hasCommand(t)?t.setCommand()+h+s.commands[t].description:"man".setCommand()+": "+t.setCommand()+" is an unknown command.":"man:".setCommand()+" No command entered."}},{name:"Help",description:"lists help for all the commands",type:s.CMD.SYSTEM,handler:function(){var e="Available Commands:".setTitle();return c.map(s.commands,function(t,n){e+=d,e+=n.setCommand(),e+=h,e+=t.description}),e}},{name:"Name",description:"owner of the résumé",data:["basics","name"],type:s.CMD.BASIC},{name:"About",description:"about me",data:["basics","summary"],type:s.CMD.BASIC},{name:"pdf",title:"Résumé PDF",description:"pdf version of the résumé",data:["basics","pdfLink"],type:s.CMD.CALCULATED,handler:function(t){return window.open(t),decodeURIComponent(escape(t))+d+"Hint: May need to allow pop-ups."}},{name:"Location",description:"current location",data:["basics","location"],dataIsObject:!0,type:s.CMD.CALCULATED,handler:function(t){var n=[];return t.city&&n.push(t.city),t.region&&n.push(t.region),t.countryCode&&n.push(t.countryCode),n.join(o)}},{name:"Label",description:"title",data:["basics","label"],type:s.CMD.BASIC},{name:"Education",description:"education history",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.institution},title:function(t){return n=t.studyType,e=t.area,n||e?n?e?n+" of "+e:n:e:l;var n,e},date:function(t){return S(t.startDate,t.endDate)}}},{name:"Employment",description:"employment history",data:"work",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.company},title:function(t){return t.position},date:function(t){return S(t.startDate,t.endDate)}}},{name:"Volunteering",description:"volunteering history",data:"volunteer",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.organization},title:function(t){return t.position},date:function(t){return S(t.startDate,t.endDate)}}},{name:"socialmedia",title:"Social Media",description:"social media profiles",data:["basics","profiles"],dataIsObject:!0,type:s.CMD.CALCULATED,handler:function(t){var e=[];return t.forEach(function(t){var n=function(t){if(t.network){var n=k(t.network,t.url,t.username);return!!n&&t.network.upperCaseFirstLetter()+h+n}return!!t.url&&t.url}(t);if(!n)return!0;e.push(n)}),e.join(d)}},{name:"Skills",description:"skills obtained",type:s.CMD.CALCULATED,handler:function(e){var a=l;return e.forEach(function(t,n){t.level&&(a+=t.level,t.name&&(a+=" in ")),t.name&&(a+=t.name),n!==e.length-1&&(a+=d)}),a}},{name:"Awards",description:"awards obtained",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.awarder},title:function(t){return t.title},date:function(t){return t.date}}},{name:"Publications",description:"publications produced",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.publisher},title:function(t){return t.name},date:function(t){return t.releaseDate}}},{name:"Languages",description:"languages",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.language},title:function(t){return t.fluency}}},{name:"Interests",description:"interests",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.name?t.name.setName():""},title:function(t){return t.keywords?t.keywords.join(o):""}}},{name:"References",description:"references",type:s.CMD.ARRAY,handlers:{organisation:function(t){return t.name?t.name.setName():""},title:function(t){return t.reference}}},{name:"splash",title:"Splash Screen",description:"print the welcome screen",type:s.CMD.SYSTEM,handler:function(){var t=l;return s.data.customSplash?t+=s.data.customSplash:s.data.basics.name?t+="Welcome to "+s.data.basics.name.setName()+"'s résumé.":t+="Welcome to my résumé.",t+=d,t+=d,t+="Type ",t+="help".setCommand(),t+=" for commands"}},{name:"pgpkey",title:"PGP Key",description:"public PGP key",type:s.CMD.CALCULATED,handler:function(){for(var t=l,n=0;n<s.data.pgpkey.length;n++)t+=s.data.pgpkey[n],n!==s.data.pgpkey.length-1&&(t+=d);return t.setPGP()}}],s.initTerminal=function(){s.term=i.terminal(function(t,n){var e=c.terminal.split_command(t);n.echo(s.commandLineParse(e.name,e.args)+d)},s.settings)},s.initGithubForks=function(t){s.showForks=t.showForks||"true"===t.showForks},s.init=function(t){s.initGithubForks(t),s.initVariables(),s.initCommands(),s.initSettings(),s.initHTMLTitle(),s.initTerminal()},s.commandLineParse=function(t,n){var e=!C(n[0])&&0<n[0].length&&n[0],a=s.commands[t];if("man"===t)return s.commands.man.handler(e);if(a){var r="-top"===e;return s.processCommand(a,r)}return 0<t.length?t.setCommand()+" is an unknown command.":"No command entered."},s.showTitle=function(t,n){return t!==s.CMD.SYSTEM&&(!n||t!==s.CMD.ARRAY)},s.processCommand=function(t,n){var e=l;return s.showTitle(t.type,n)&&(e+=t.title.setTitle()),e+=s.CMD.getCommand(t.type)(t,n)},s.getCommandList=function(){var e=[];return c.map(s.commands,function(t,n){e.push(n)}),e},s.hasCommand=function(t){return 0<=s.commandList.indexOf(t)},s.initClear=function(){s.commands.clear={description:"clear command history from screen"}},s.addCommand=function(t){if(t.type===s.CMD.SYSTEM||function(t,n,e){if(!n||!t)return!1;var a=b(t,y(n));return a&&(!!e||a.length)}(s.data,t.data?t.data:t.name.toLowerCase(),!!t.dataIsObject)){var n={title:t.title?t.title:t.name,description:t.description,type:t.type};t.type!==s.CMD.SYSTEM&&(n.data=b(s.data,t.data?t.data:t.name.toLowerCase())),t.handlers&&(n.handlers=t.handlers),t.handler&&(n.handler=t.handler),s.commands[t.name.toLowerCase()]=n}},s.addCommands=function(){s.allCommands.forEach(function(t){s.addCommand(t)})},s.initCommands=function(){s.initClear(),s.addCommands()},s.initSocialMedia=function(){s.data.basics.profiles.forEach(function(t){t.network&&(s.data.basics.githubUsername||"github"!==t.network.toLowerCase()?"resume"===t.network.toLowerCase()&&(s.data.basics.pdfLink=t.url):t.username&&(s.data.basics.githubUsername=t.username))})},s.initGithub=function(){var t,n,r,i,o,e;e=s.data.basics.githubUsername,t=e?"https://api.github.com/users/"+e+"/repos":l,n=s.data.basics.githubUsername,r=s.showForks,i=function(t){var i=l;t.forEach(function(t,n){var e,a,r;i+=(a=0===n,r=l,(e=t)&&e.name&&(a||(r+=d),r+=e.name.setName(),e.description&&(r+=h+e.description)),r)}),s.data.githubCache=i,s.addCommand({name:"Github",title:"Github Repositories",description:"list Github repositories",type:s.CMD.BASIC,data:"githubCache"})},o=n.toLowerCase()+".github.com",c.getJSON(t,function(t){var n,e,a;t&&0<t.length&&i((n=o,e=r,a=[],t.forEach(function(t){!t||t.name===n||e!==t.fork&&t.fork||a.push(t)}),a))})},s.initVariables=function(){s.data.commands={},s.data.basics.profiles&&s.initSocialMedia(),s.data.basics.githubUsername&&s.initGithub()},s.initSettings=function(){s.commandList=s.getCommandList(),s.settings={greetings:s.commands.splash.handler(),onBlur:function(){return!1},completion:s.commandList}},s.initHTMLTitle=function(){var t;t=s.data.basics.name,document.title=t?t+"'s Résumé":"Command Line Résumé"},c.getJSON(t,function(t){s.data=t,s.data.basics||(s.data.basics={}),n.extraDetails?c.getJSON(n.extraDetails,function(t){s.data.pgpkey=t.pgpkey,t.github&&(s.data.basics.githubUsername=t.github,s.data.githubCache=l),t.splash&&("string"==typeof t.splash?s.data.customSplash=t.splash+d:s.data.customSplash=t.splash.join(d)),s.init(n)}):s.init(n)}),this.CMDResume=s,this}}(jQuery);