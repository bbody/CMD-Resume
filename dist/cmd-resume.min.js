!function(c){"use strict";var m={standard:{color:"white",bold:!1,italic:!1,backgroundColor:"#000"},title:{color:"red",bold:!0},command:{color:"white",bold:!1,italic:!0},pgp:{color:"white",bold:!1,italic:!0},name:{color:"green",bold:!0}},d="\n",l=";",u="",r="\t",p=":",h=", ",f=" - ",g={STANDARD:0,TITLE:1,COMMAND:2,NAME:3,PGP:4,toString:function(t){switch(t){case g.TITLE:return"title";case g.COMMAND:return"command";case g.NAME:return"name";case g.PGP:return"pgp";case g.STANDARD:return"standard";default:return""}}},b=function(t){return null==t},y=function(t){return!!t&&c.terminal.valid_color(t)};String.prototype.setFormat=function(t){var a=u;if(0===this.length)return a;var n,e,r=g.toString(t),o=m[r]?m[r]:m.standard,i=o.color&&y(o.color)?o.color:m.standard.color,s=o.bold?o.bold:m.standard.bold,c=o.italic?o.italic:m.standard.italic,d=o.backgroundColor&&y(o.backgroundColor)?o.backgroundColor:m.standard.backgroundColor;return s&&(a+="b"),c&&(a+="i"),i&&(a+=l,a+=i),d&&((s||c||i)&&(a+=l),a+=d),n=a,(e=this)?"[["+(n=n||u)+"]"+e+"]":u},String.prototype.setTitle=function(){return this.setFormat(g.TITLE)},String.prototype.setCommand=function(){return this.setFormat(g.COMMAND)},String.prototype.setName=function(){return this.setFormat(g.NAME)},String.prototype.setPGP=function(){return this.setFormat(g.PGP)};var w=function(t,a){return a?t+f+a:t?t+" - Present":u},k=function(t){var a=d;return a+=t&&t.data?t.data:u},P=function(t){return t?t.handler?t.handler(t.data):t.data?t.data:u:u},C=function(t){return d+P(t)},v=function(a,n){var e=u;return a.handlers&&(a.handlers.title||a.handlers.organisation||a.handlers.date)&&a.data.some(function(t){return n||(e+=d),a.handlers.organisation&&(a.handlers.title||a.handlers.date?e+=a.handlers.organisation(t)+r:e+=a.handlers.organisation(t)),a.handlers.title&&(a.handlers.date?e+=a.handlers.title(t)+r:e+=a.handlers.title(t)),a.handlers.date&&(e+=a.handlers.date(t)),n}),e};c.fn.CMDResume=function(t,a,n){var e,r,o,i=this;(n=n||{})||"string"!=typeof a&&(n=a),e=m,r=n,o=c.extend(!0,{},e),c.each(r,function(t,a){e[t]&&(a.color&&(o[t].color=a.color),b(a.bold)||(o[t].bold=a.bold),b(a.italic)||(o[t].italic=a.italic),a.backgroundColor&&(o[t].backgroundColor=a.backgroundColor))}),m=o;var s={commands:{}};return s.commandProcessor={basic:k,array:v,calculated:C,system:P},s.initTerminal=function(){s.term=i.terminal(function(t,a){var n=c.terminal.split_command(t);a.echo(s.commandLineParse(n.name,n.args)+d)},s.settings)},s.initGithubForks=function(t){s.showForks=t.showForks||"true"===t.showForks},s.init=function(t){s.initGithubForks(t),s.initVariables(),s.initCommands(),s.initSettings(),s.initHTMLTitle(),s.initTerminal()},s.commandLineParse=function(t,a){var n=!b(a[0])&&0<a[0].length&&a[0],e=s.commands[t];if("man"===t)return s.commands.man.handler(n);if(e){var r="-top"===n;return s.processCommand(e,r)}return 0<t.length?t.setCommand()+" is an unknown command.":"No command entered."},s.processCommand=function(t,a){var n=u;return a||t.type===s.commandProcessor.system||(n+=t.title.setTitle()),n+=t.type(t,a)},s.getCommandList=function(){var n=[];return c.map(s.commands,function(t,a){n.push(a)}),n},s.hasCommand=function(t){return 0<=s.commandList.indexOf(t)},s.getCategory=function(t){return s.commands[t].type},s.initCommands=function(){s.commands.man={title:"man".setCommand(),description:"describes what each command does",type:s.commandProcessor.system,handler:function(t){return t?s.hasCommand(t)?t.setCommand()+f+s.commands[t].description:"man".setCommand()+": "+t.setCommand()+" is an unknown command.":"man:".setCommand()+" No command entered."}},s.commands.help={title:"Help",description:"lists help for all the commands",type:s.commandProcessor.system,handler:function(){var n="Available Commands:".setTitle();return c.map(s.commands,function(t,a){n+=d,n+=a.setCommand(),n+=f,n+=t.description}),n}},s.commands.clear={description:"clear command history from screen"},s.data.basics.name&&(s.commands.name={title:"Name",description:"owner of the résumé",data:s.data.basics.name,type:s.commandProcessor.basic}),s.data.commands&&s.data.commands.pgpkey&&(s.commands.pgpkey={title:"PGP Key",description:"public PGP key",data:s.data.commands.pgpkey,type:s.commandProcessor.calculated,handler:function(t){return t.setPGP()}}),s.data.basics.summary&&(s.commands.about={title:"About",description:"about me",data:s.data.basics.summary,type:s.commandProcessor.basic}),s.data.basics.pdfLink&&(s.commands.pdf={title:"Resume PDF",description:"pdf version of the résumé",data:s.data.basics.pdfLink,type:s.commandProcessor.calculated,handler:function(t){return window.open(t),t+d+"Hint: May need to allow pop-ups."}}),s.data.basics.location&&(s.commands.location={title:"Location",description:"current location",data:s.data.basics.location,type:s.commandProcessor.calculated,handler:function(t){return t.city+(t.region?h+t.region:u)+h+t.countryCode}}),s.data.basics.label&&(s.commands.lookingfor={title:"Looking For",description:"looking for what kind of position",data:s.data.basics.label,type:s.commandProcessor.calculated,handler:function(t){return t+" positions"}}),s.data.basics.profiles&&(s.commands.socialmedia={title:"Social Media",description:"social media profiles",data:s.data.basics.profiles,type:s.commandProcessor.calculated,handler:function(t){var e=u;return t.forEach(function(t,a){if(t.network)if(0!==a&&(e+=d),"email"===t.network.toLowerCase())e+=t.network+f+t.url.split(p).charAt(1);else if(t.url)e+=t.network+f+t.url;else if(t.username){var n;(n=function(t,a){if(!t||!a)return u;switch(t.toLowerCase()){case"twitter":return"https://www.twitter.com/"+a;case"github":return"https://www.github.com/"+a;case"linkedin":return"https://www.linkedin.com/in/"+a;case"facebook":return"https://www.facebook.com/"+a;case"reddit":return"https://www.reddit.com/user/"+a;case"hackernews":return"https://news.ycombinator.com/user?id="+a;default:return u}}(t.network,t.username))&&(e+=t.network+f+n)}}),e}}),s.data.skills&&(s.commands.skills={title:"Skills",description:"skills obtained",type:s.commandProcessor.calculated,data:s.data.skills,handler:function(n){var e=u;return n.forEach(function(t,a){e+=t.level,e+=" in ",e+=t.name,a!==n.length-1&&(e+=d)}),e}}),s.commands.splash={title:"Splash Screen",description:"print the welcome screen",type:s.commandProcessor.system,handler:function(){var t=u;return s.data.commands.splash&&s.data.commands.splash&&(t+=s.data.commands.splash,t+=d),s.data.basics.name?t+="Welcome to "+s.data.basics.name.setName()+"'s résumé.":t+="Welcome to my résumé.",t+=d,t+=d,t+="Type ",t+="help".setCommand(),t+=" for commands"}},s.data.education&&(s.commands.education={title:"Education",description:"education history",data:s.data.education,type:s.commandProcessor.array,handlers:{organisation:function(t){return t.institution},title:function(t){return a=t.studyType,(n=t.area)?a+" of "+n:a||u;var a,n},date:function(t){return w(t.startDate,t.endDate)}}}),s.data.work&&(s.commands.employment={title:"Employment",description:"employment history",data:s.data.work,type:s.commandProcessor.array,handlers:{organisation:function(t){return t.company},title:function(t){return t.position},date:function(t){return w(t.startDate,t.endDate)}}}),s.data.volunteer&&(s.commands.volunteering={title:"Volunteering",description:"volunteering history",type:s.commandProcessor.array,data:s.data.volunteer,handlers:{organisation:function(t){return t.organization},title:function(t){return t.position},date:function(t){return w(t.startDate,t.endDate)}}}),s.data.awards&&(s.commands.awards={title:"Awards",description:"awards obtained",type:s.commandProcessor.array,data:s.data.awards,handlers:{organisation:function(t){return t.awarder},title:function(t){return t.title},date:function(t){return t.date}}}),s.data.publications&&(s.commands.publications={title:"Publications",description:"publications produced",type:s.commandProcessor.array,data:s.data.publications,handlers:{organisation:function(t){return t.publisher},title:function(t){return t.name},date:function(t){return t.releaseDate}}}),s.data.languages&&(s.commands.languages={title:"Languages",description:"languages",type:s.commandProcessor.array,data:s.data.languages,handlers:{organisation:function(t){return t.language},title:function(t){return t.fluency}}}),s.data.interests&&(s.commands.interests={title:"Interests",description:"interests",type:s.commandProcessor.array,data:s.data.interests,handlers:{organisation:function(t){return t.name+p},title:function(t){return t.keywords.join(h)}}}),s.data.references&&(s.commands.references={title:"References",description:"references",type:s.commandProcessor.array,data:s.data.references,handlers:{organisation:function(t){return t.name.setName()+p},title:function(t){return d+t.reference}}})},s.initVariables=function(){var t,a,r,o,i,n;s.data.commands={},s.data.basics.profiles.forEach(function(t){s.data.basics.githubUsername||"github"!==t.network.toLowerCase()?"resume"===t.network.toLowerCase()&&(s.data.basics.pdfLink=t.url):t.username?s.data.basics.githubUsername=t.username:t.url&&(s.data.basics.githubUsername=t.url)}),s.data.basics.githubUsername&&(n=s.data.basics.githubUsername,t=n?"https://api.github.com/users/"+n+"/repos":u,a=s.data.basics.githubUsername,r=s.showForks,o=function(t){if(!b(t.length)){var o=u;t.forEach(function(t,a){var n,e,r;o+=(e=0===a,r=u,(n=t)&&n.name&&(e||(r+=d),r+=n.name.setName(),n.description&&(r+=f+n.description)),r)}),s.commands.github={title:"Github Repositories",description:"list Github repositories",type:s.commandProcessor.basic,data:o},s.commandList.push("github")}},i=a.toLowerCase()+".github.com",c.getJSON(t,function(t){var a,n,e;t&&0<t.length&&o((a=i,n=r,e=[],t.forEach(function(t){!t||t.name===a||n!==t.fork&&t.fork||e.push(t)}),e))}))},s.initSettings=function(){s.commandList=s.getCommandList(),s.settings={greetings:s.commands.splash.handler(),onBlur:function(){return!1},completion:s.commandList}},s.initHTMLTitle=function(){var t;t=s.data.basics.name,document.title=t?t+"'s Résumé":"Command Line Résumé"},c.getJSON(t,function(t){s.data=t,a||s.init(n),c.getJSON(a,function(t){s.data.pgpkey=t.pgpkey,s.data.pgpkey&&(s.commands.pgpkey={title:"PGP Key",description:"print PGP key",type:s.commandProcessor.calculated,handler:function(){for(var t=u,a=0;a<s.data.pgpkey.length;a++)t+=s.data.pgpkey[a],a!==s.data.pgpkey.length-1&&(t+=d);return t.setPGP()}}),t.github&&(s.data.basics.githubUsername=t.github,s.data.githubCache=u),t.splash&&(s.data.splash=t.splash),s.init(n)})}),this.CMDResume=s,this}}(jQuery);